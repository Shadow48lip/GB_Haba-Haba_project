{% extends 'mainapp/base.html' %}
{% load static %}

{% block content %}
    <div class="col">
        <div class="single-card card border border-secondary border-opacity-25">
            <h2>
                Личный кабинет пользователя
                {% if user.first_name and user.last_name %}
                    {{ user.first_name }} {{ user.last_name }}
                {% else %}
                    {{ user.username }}
                {% endif %}
            </h2>
            <p>Центральный блок со статьями пользователя</p>
            {% for post in posts %}
                <div>
                    <h3>{{ post.title }}</h3>
                    <p>{{ post.content|striptags|truncatechars:'100' }}</p>
                    <p><a href="{{ post.get_absolute_url }}">открыть</a></p>
                </div>
            {% endfor %}

            {% if is_paginated %}
                {% if page_obj.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="{% url 'user:my_profile_view' %}?page={{ page_obj.previous_page_number }}">&laquo;</a>
                    </li>
                {% endif %}
                    <li class="page-item active" aria-current="page">
                        <span class="page-link">{{ page_obj.number }} из {{ page_obj.paginator.num_pages }}</span>
                    </li>
                {% if page_obj.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="{% url 'user:my_profile_view' %}?page={{ page_obj.next_page_number }}">&raquo;</a>
                    </li>
                {% endif %}
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block sidebar %}
    <p><a href="{% url 'user:my_profile_edit' %}" class="auth">Редактировать {{ user.username }}</a></p>
    <ul class="list-group sidebar-sticky-top sticky-top">
        <a href="#"
            class="sidebar-item list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <span class="sidebar-item-title">статей</span>
            <span class="badge bg-primary">63</span>
        </a>
        <a href="#"
            class="sidebar-item list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <span class="sidebar-item-title">комментариев</span>
            <span class="badge bg-primary">325</span>
        </a>
        <a href="#"
            class="sidebar-item list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <span class="sidebar-item-title">лайков</span>
            <span class="badge bg-primary">33</span>
        </a>
    </ul>
{% endblock %}
